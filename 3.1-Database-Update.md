## Overview
Version 3.1 or Zanata will store files for some uploaded documents on the file system in a configured directory. This directory must be configured by binding to a JNDI name, but if liquibase is run from the command line the directory must also be passed as a parameter to liquibase.

Since files were previously stored as BLOBs in the database, there is a migration operation to move the files from the database to the file system. Migration is performed when liquibase is run, which will happen automatically at server startup, or can be initiated from the command line.

## Document Storage Directory JNDI name
For normal server operation, Zanata requires the directory path to be bound to the following JNDI name: java:global/zanata/files/document-storage-directory

## Liquibase Parameter
If liquibase run from the command line the JNDI context may not be available, so a liquibase parameter is available to specify the document storage directory. The value passed to this parameter should match the value bound to the above JNDI name.
Liquibase parameter: document.storage.directory ( e.g. -Ddocument.storage.directory=/my/path )

## Moving files
The recommended process to change the document storage directory after migration is:
 - shut down Zanata server
 - move the entire contents of the previously configured directory to the new directory
 - change the JNDI binding to point to the new directory
 - re-start Zanata server
The file copying can be performed after changing the JNDI binding while the server is running, but this could cause problems if uploads are performed before or during the copying process.